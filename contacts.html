<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Контакты | Комиссия по фигурному управлению мотоциклом | МФР</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Дополнительные стили для страницы контактов */
        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .contact-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 4px solid #1e88e5;
            position: relative;
            overflow: hidden;
        }
        
        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .contact-card:nth-child(2) {
            border-top-color: #ff9800;
        }
        
        .contact-card:nth-child(3) {
            border-top-color: #43a047;
        }
        
        .contact-card:nth-child(4) {
            border-top-color: #8e24aa;
        }
        
        .contact-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1e88e5, #0d47a1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 1.5rem;
        }
        
        .contact-card:nth-child(2) .contact-icon {
            background: linear-gradient(135deg, #ff9800, #f57c00);
        }
        
        .contact-card:nth-child(3) .contact-icon {
            background: linear-gradient(135deg, #43a047, #2e7d32);
        }
        
        .contact-card:nth-child(4) .contact-icon {
            background: linear-gradient(135deg, #8e24aa, #6a1b9a);
        }
        
        .contact-card h2 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .contact-card p {
            margin-bottom: 0.8rem;
            color: #555;
            line-height: 1.6;
        }
        
        .contact-card i {
            color: #1e88e5;
            margin-right: 0.5rem;
            width: 20px;
        }
        
        .social-section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }
        
        .social-links {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            color: white;
            text-decoration: none;
            transition: transform 0.3s, box-shadow 0.3s;
            font-weight: 600;
        }
        
        .social-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.2);
        }
        
        .social-link.vk {
            background: linear-gradient(135deg, #4c75a3, #2a5885);
        }
        
        .social-link.telegram {
            background: linear-gradient(135deg, #2aabee, #229ed9);
        }
        
        .social-link span {
            font-size: 1.1rem;
        }
        
        .contact-form-section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #1e88e5;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1e88e5, #0d47a1);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }
        
        .map-container {
            margin-top: 3rem;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .map-placeholder {
            background: #f5f5f5;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.2rem;
        }
        
        /* Стили для админ-панели */
        .admin-tab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff5722, #d84315);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 87, 34, 0.4);
            z-index: 999;
            transition: transform 0.3s;
        }
        
        .admin-tab:hover {
            transform: scale(1.1);
        }
        
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: right 0.3s ease-in-out;
            overflow-y: auto;
            padding: 1rem;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 1.5rem;
        }
        
        .close-admin-panel {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
        }
        
        .admin-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .tab-btn {
            padding: 0.7rem 1rem;
            background: #f5f5f5;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .tab-btn.active {
            background: #1e88e5;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .admin-list {
            margin-top: 2rem;
            border-top: 2px solid #e0e0e0;
            padding-top: 1rem;
        }
        
        .admin-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 0.8rem;
            background: #f9f9f9;
        }
        
        .btn-danger {
            background: #e53935;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .btn-secondary {
            background: #757575;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 1rem;
        }
        
        .login-message {
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 6px;
            text-align: center;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
        }
        
        .modal-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .contact-info {
                grid-template-columns: 1fr;
            }
            
            .social-links {
                flex-direction: column;
            }
            
            .admin-panel {
                width: 100%;
                right: -100%;
            }
            
            .admin-tab {
                bottom: 20px;
                right: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .contact-card, .social-section, .contact-form-section {
                padding: 1.5rem;
            }
            
            .social-link {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-container">
                <div class="logo-left">
                    <img src="images/logo_sm.png" alt="Логотип комиссии" class="logo-img">
                </div>
                <div class="logo-right">
                    <div class="official-name">МОТОЦИКЛЕТНАЯ ФЕДЕРАЦИЯ РОССИИ</div>
                    <div class="commission-name">КОМИССИЯ ПО ФИГУРНОМУ УПРАВЛЕНИЮ МОТОЦИКЛОМ (МОТОДЖИМХАНА)</div>
                </div>
            </div>
            <button class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="nav-link">Главная</a></li>
                    <li><a href="about.html" class="nav-link">О комиссии</a></li>
                    <li><a href="structure.html" class="nav-link">Структура комиссии</a></li>
                    <li><a href="calendar.html" class="nav-link">Календарь соревнований</a></li>
                    <li><a href="documents.html" class="nav-link">Полезные документы</a></li>
                    <li><a href="contacts.html" class="nav-link active">Контакты</a></li>
                    <li><a href="partners.html" class="nav-link">Партнеры</a></li>
                </ul>
            </nav>
            
            <!-- Mobile menu -->
            <nav class="mobile-menu">
                <div class="mobile-nav">
                    <ul>
                        <li><a href="index.html" class="nav-link">Главная</a></li>
                        <li><a href="about.html" class="nav-link">О комиссии</a></li>
                        <li><a href="structure.html" class="nav-link">Структура комиссии</a></li>
                        <li><a href="calendar.html" class="nav-link">Календарь соревнований</a></li>
                        <li><a href="documents.html" class="nav-link">Полезные документы</a></li>
                        <li><a href="contacts.html" class="nav-link active">Контакты</a></li>
                        <li><a href="partners.html" class="nav-link">Партнеры</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <main class="content">
            <h1 class="page-title">Контакты</h1>
            
            <section class="contact-info" id="contact-cards-container">
                <!-- Карточки контактов будут динамически загружаться через JavaScript -->
            </section>
            
            <section class="contact-form-section">
                <h2 class="section-title">Свяжитесь с нами</h2>
                <form id="contact-form">
                    <div class="form-group">
                        <label for="name" class="form-label">Ваше имя</label>
                        <input type="text" id="name" class="form-control" placeholder="Введите ваше имя" required>
                    </div>
                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" id="email" class="form-control" placeholder="Введите ваш email" required>
                    </div>
                    <div class="form-group">
                        <label for="subject" class="form-label">Тема сообщения</label>
                        <input type="text" id="subject" class="form-control" placeholder="Тема сообщения" required>
                    </div>
                    <div class="form-group">
                        <label for="message" class="form-label">Сообщение</label>
                        <textarea id="message" class="form-control" placeholder="Введите ваше сообщение..." required></textarea>
                    </div>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-paper-plane"></i> Отправить сообщение
                    </button>
                    <div id="form-message" style="margin-top: 1rem;"></div>
                </form>
            </section>
            
            <section class="social-section">
                <h2 class="section-title">Социальные сети</h2>
                <div class="social-links" id="social-links-container">
                    <!-- Социальные ссылки будут динамически загружаться через JavaScript -->
                </div>
                <p id="social-description">Присоединяйтесь к нашим группам в социальных сетях, чтобы быть в курсе последних новостей и событий!</p>
            </section>
            
            <div class="map-container">
                <div class="map-placeholder">
                    <i class="fas fa-map-marker-alt" style="font-size: 3rem; margin-right: 1rem; color: #1e88e5;"></i>
                    <div>
                        <h3>Карта будет здесь</h3>
                        <p>В будущем здесь будет интерактивная карта с расположением офиса</p>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-logos">
                <a href="https://www.mfr.ru/" target="_blank">
                    <img src="images/mfr_logo.png" alt="Логотип МФР">
                </a>
                <a href="https://www.minsport.gov.ru/" target="_blank">
                    <img src="images/logo_minsport.png" alt="Логотип Министерства спорта РФ">
                </a>
            </div>
            <div class="footer-links">
                <a href="documents.html" class="document-link">Документы комиссии</a>
                <a href="https://www.mfr.ru/" target="_blank">Официальный сайт МФР</a>
                <a href="https://www.mfr.ru/disciplines/motodzhimkhana/" target="_blank">Страница мотоджимханы на сайте МФР</a>
            </div>
            <div class="copyright">
                © 2025 Мотоциклетная Федерация России
            </div>
        </footer>
    </div>

    <!-- Admin tab -->
    <div class="admin-tab" id="admin-tab">
        <i class="fas fa-cog"></i>
    </div>

    <!-- Admin panel -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-header">
            <h2>Админ-панель</h2>
            <button class="close-admin-panel" id="close-admin-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="contacts">Контакты</button>
            <button class="tab-btn" data-tab="social">Социальные сети</button>
            <button class="tab-btn" data-tab="settings">Настройки</button>
        </div>
        
        <div class="tab-content active" id="contacts-tab">
            <h3>Управление контактной информацией</h3>
            <div id="contacts-forms">
                <!-- Формы для контактных карточек будут динамически созданы через JavaScript -->
            </div>
            <button id="add-contact-card-btn" class="btn-primary">
                <i class="fas fa-plus"></i> Добавить новую контактную карточку
            </button>
        </div>
        
        <div class="tab-content" id="social-tab">
            <h3>Управление социальными сетями</h3>
            <div id="social-forms">
                <!-- Формы для социальных сетей будут динамически созданы через JavaScript -->
            </div>
            <button id="add-social-link-btn" class="btn-primary">
                <i class="fas fa-plus"></i> Добавить новую социальную сеть
            </button>
            
            <div class="form-group" style="margin-top: 2rem;">
                <label for="social-description-input">Описание для раздела социальных сетей</label>
                <textarea id="social-description-input" class="form-control" rows="3" placeholder="Введите описание для раздела социальных сетей"></textarea>
                <button id="update-social-description-btn" class="btn-primary" style="margin-top: 1rem;">
                    <i class="fas fa-save"></i> Сохранить описание
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="settings-tab">
            <h3>Настройки контактов</h3>
            <div class="form-group">
                <label for="contact-form-email">Email для получения сообщений</label>
                <input type="email" id="contact-form-email" class="form-control" placeholder="Введите email для получения сообщений">
                <p class="help-text">На этот email будут приходить сообщения из формы обратной связи</p>
            </div>
            <div class="form-group">
                <label for="contact-form-success-message">Сообщение об успешной отправке</label>
                <input type="text" id="contact-form-success-message" class="form-control" placeholder="Сообщение об успешной отправке">
            </div>
            <div class="form-group">
                <label for="contact-form-error-message">Сообщение об ошибке</label>
                <input type="text" id="contact-form-error-message" class="form-control" placeholder="Сообщение об ошибке">
            </div>
            <button id="save-settings-btn" class="btn-primary">
                <i class="fas fa-save"></i> Сохранить настройки
            </button>
            
            <div class="admin-login" style="margin-top: 2rem; border-top: 2px solid #e0e0e0; padding-top: 1rem;">
                <h4>Административный доступ</h4>
                <div class="form-group">
                    <label for="admin-password">Пароль</label>
                    <input type="password" id="admin-password" class="form-control" placeholder="Введите пароль">
                </div>
                <button class="btn-secondary" id="login-admin-btn">Войти</button>
                <div id="login-message" class="login-message"></div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content">
            <h3>Подтверждение действия</h3>
            <p id="modal-message">Вы уверены, что хотите выполнить это действие?</p>
            <div class="modal-buttons">
                <button class="btn-secondary" id="modal-cancel">Отмена</button>
                <button class="btn-primary" id="modal-confirm">Подтвердить</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы управления админ-панелью
            const adminTab = document.getElementById('admin-tab');
            const adminPanel = document.getElementById('admin-panel');
            const closeAdminPanel = document.getElementById('close-admin-panel');
            
            // Элементы модального окна
            const confirmationModal = document.getElementById('confirmation-modal');
            const modalMessage = document.getElementById('modal-message');
            const modalCancel = document.getElementById('modal-cancel');
            const modalConfirm = document.getElementById('modal-confirm');
            
            // Элементы страницы
            const contactCardsContainer = document.getElementById('contact-cards-container');
            const socialLinksContainer = document.getElementById('social-links-container');
            const socialDescription = document.getElementById('social-description');
            const contactForm = document.getElementById('contact-form');
            const formMessage = document.getElementById('form-message');
            
            // Элементы админ-панели
            const contactsFormsContainer = document.getElementById('contacts-forms');
            const socialFormsContainer = document.getElementById('social-forms');
            const addContactCardBtn = document.getElementById('add-contact-card-btn');
            const addSocialLinkBtn = document.getElementById('add-social-link-btn');
            const updateSocialDescriptionBtn = document.getElementById('update-social-description-btn');
            const socialDescriptionInput = document.getElementById('social-description-input');
            const saveSettingsBtn = document.getElementById('save-settings-btn');
            const loginBtn = document.getElementById('login-admin-btn');
            
            // Переменные для управления состоянием
            let isAdminLoggedIn = false;
            let currentAction = null;
            let currentData = null;
            
            // Иконки для контактных карточек
            const contactIcons = [
                'user-tie', 'users', 'building', 'clock', 'map-marker-alt', 
                'phone', 'envelope', 'globe', 'motorcycle', 'medal'
            ];
            
            // Иконки для социальных сетей
            const socialIcons = {
                'vk': 'fab fa-vk',
                'telegram': 'fab fa-telegram-plane',
                'youtube': 'fab fa-youtube',
                'instagram': 'fab fa-instagram',
                'facebook': 'fab fa-facebook-f',
                'twitter': 'fab fa-twitter',
                'whatsapp': 'fab fa-whatsapp'
            };
            
            // Цвета для социальных сетей
            const socialColors = {
                'vk': '#4c75a3',
                'telegram': '#2aabee',
                'youtube': '#ff0000',
                'instagram': '#e4405f',
                'facebook': '#1877f2',
                'twitter': '#1da1f2',
                'whatsapp': '#25d366'
            };
            
            // Загружаем данные из localStorage или используем начальные данные
            let contactsData = JSON.parse(localStorage.getItem('contactsData')) || [
                {
                    id: 1,
                    icon: 'user-tie',
                    title: 'Председатель комиссии',
                    content: [
                        '<strong>Дмитрий Серов</strong>',
                        '<i class="fas fa-phone"></i> +7 (977) 823-63-90',
                        '<i class="fas fa-envelope"></i> serovdima@list.ru',
                        '<i class="fas fa-map-marker-alt"></i> Тверская область'
                    ]
                },
                {
                    id: 2,
                    icon: 'users',
                    title: 'Региональные представители',
                    content: [
                        'Полный список региональных представителей можно найти в разделе <a href="structure.html">"Структура комиссии"</a>',
                        '<i class="fas fa-globe"></i> <a href="structure.html">Перейти к списку</a>'
                    ]
                },
                {
                    id: 3,
                    icon: 'building',
                    title: 'Юридический адрес',
                    content: [
                        '121357, г. Москва,',
                        'ул. Давыдковская, д. 15',
                        '<i class="fas fa-phone"></i> +7 (495) 123-45-67',
                        '<i class="fas fa-envelope"></i> serovdima@list.ru'
                    ]
                },
                {
                    id: 4,
                    icon: 'clock',
                    title: 'График работы',
                    content: [
                        'Председатель комиссии доступен:',
                        'Ежедневно с 10:00 до 20:00',
                        'по Московскому времени',
                        'Выходные дни: суббота, воскресенье'
                    ]
                }
            ];
            
            let socialData = JSON.parse(localStorage.getItem('socialData')) || [
                {
                    id: 1,
                    platform: 'vk',
                    url: 'https://vk.com/motodzhimhana_russia',
                    name: 'ВКонтакте'
                },
                {
                    id: 2,
                    platform: 'telegram',
                    url: 'https://t.me/motodzhimkhana',
                    name: 'Telegram'
                }
            ];
            
            let settingsData = JSON.parse(localStorage.getItem('contactSettings')) || {
                socialDescription: 'Присоединяйтесь к нашим группам в социальных сетях, чтобы быть в курсе последних новостей и событий!',
                contactFormEmail: 'serovdima@list.ru',
                successMessage: 'Сообщение успешно отправлено! Мы свяжемся с вами в ближайшее время.',
                errorMessage: 'Произошла ошибка при отправке сообщения. Пожалуйста, попробуйте еще раз.'
            };
            
            // Инициализация страницы
            function initializePage() {
                renderContactCards();
                renderSocialLinks();
                loadSettings();
                setupEventListeners();
                setupAdminPanel();
                loadAdminForms();
            }
            
            // Рендер контактных карточек
            function renderContactCards() {
                contactCardsContainer.innerHTML = '';
                
                contactsData.forEach((contact, index) => {
                    const contactCard = document.createElement('div');
                    contactCard.className = 'contact-card';
                    contactCard.dataset.id = contact.id;
                    
                    contactCard.innerHTML = `
                        <div class="contact-icon">
                            <i class="fas fa-${contact.icon}"></i>
                        </div>
                        <h2>${contact.title}</h2>
                        ${contact.content.map(item => `<p>${item}</p>`).join('')}
                    `;
                    
                    contactCardsContainer.appendChild(contactCard);
                });
                
                // Сохраняем данные в localStorage
                localStorage.setItem('contactsData', JSON.stringify(contactsData));
            }
            
            // Рендер социальных ссылок
            function renderSocialLinks() {
                socialLinksContainer.innerHTML = '';
                
                socialData.forEach((social, index) => {
                    const socialLink = document.createElement('a');
                    socialLink.href = social.url;
                    socialLink.target = '_blank';
                    socialLink.className = `social-link ${social.platform}`;
                    socialLink.dataset.id = social.id;
                    
                    socialLink.innerHTML = `
                        <i class="${socialIcons[social.platform] || 'fas fa-share-alt'}"></i>
                        <span>${social.name}</span>
                    `;
                    
                    // Устанавливаем цвет фона
                    if (socialColors[social.platform]) {
                        socialLink.style.background = `linear-gradient(135deg, ${socialColors[social.platform]}, ${adjustColor(socialColors[social.platform], -20)})`;
                    }
                    
                    socialLinksContainer.appendChild(socialLink);
                });
                
                // Сохраняем данные в localStorage
                localStorage.setItem('socialData', JSON.stringify(socialData));
            }
            
            // Функция для настройки цвета
            function adjustColor(color, amount) {
                const clamp = (val) => Math.min(Math.max(val, 0), 255);
                
                if (color.startsWith('#')) {
                    let r = parseInt(color.slice(1, 3), 16);
                    let g = parseInt(color.slice(3, 5), 16);
                    let b = parseInt(color.slice(5, 7), 16);
                    
                    r = clamp(r + amount);
                    g = clamp(g + amount);
                    b = clamp(b + amount);
                    
                    return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
                }
                
                return color;
            }
            
            // Загрузка настроек
            function loadSettings() {
                // Социальное описание
                socialDescription.textContent = settingsData.socialDescription;
                if (socialDescriptionInput) {
                    socialDescriptionInput.value = settingsData.socialDescription;
                }
                
                // Настройки формы
                if (document.getElementById('contact-form-email')) {
                    document.getElementById('contact-form-email').value = settingsData.contactFormEmail || '';
                }
                if (document.getElementById('contact-form-success-message')) {
                    document.getElementById('contact-form-success-message').value = settingsData.successMessage || '';
                }
                if (document.getElementById('contact-form-error-message')) {
                    document.getElementById('contact-form-error-message').value = settingsData.errorMessage || '';
                }
            }
            
            // Настройка обработчиков событий
            function setupEventListeners() {
                // Админ-панель
                if (adminTab) {
                    adminTab.addEventListener('click', function() {
                        adminPanel.style.right = '0';
                    });
                }
                
                if (closeAdminPanel) {
                    closeAdminPanel.addEventListener('click', function() {
                        adminPanel.style.right = '-400px';
                    });
                }
                
                // Мобильное меню
                const menuToggle = document.querySelector('.menu-toggle');
                const mobileMenu = document.querySelector('.mobile-menu');
                
                if (menuToggle && mobileMenu) {
                    menuToggle.addEventListener('click', function() {
                        mobileMenu.classList.toggle('active');
                        const icon = menuToggle.querySelector('i');
                        if (icon.classList.contains('fa-bars')) {
                            icon.classList.remove('fa-bars');
                            icon.classList.add('fa-times');
                        } else {
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                }
                
                // Форма обратной связи
                if (contactForm) {
                    contactForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        
                        const name = document.getElementById('name').value;
                        const email = document.getElementById('email').value;
                        const subject = document.getElementById('subject').value;
                        const message = document.getElementById('message').value;
                        
                        // Здесь должна быть логика отправки формы на сервер
                        // В демо-версии просто показываем сообщение
                        
                        formMessage.innerHTML = `
                            <div style="background: #d4edda; color: #155724; padding: 1rem; border-radius: 8px; border: 1px solid #c3e6cb;">
                                <i class="fas fa-check-circle"></i> ${settingsData.successMessage || 'Сообщение успешно отправлено!'}
                            </div>
                        `;
                        
                        // Очищаем форму
                        contactForm.reset();
                        
                        // Через 5 секунд скрываем сообщение
                        setTimeout(() => {
                            formMessage.innerHTML = '';
                        }, 5000);
                    });
                }
                
                // Модальное окно
                if (modalCancel) {
                    modalCancel.addEventListener('click', function() {
                        confirmationModal.style.display = 'none';
                        currentAction = null;
                        currentData = null;
                    });
                }
                
                // Закрытие модального окна при клике вне его
                window.addEventListener('click', function(event) {
                    if (event.target === confirmationModal) {
                        confirmationModal.style.display = 'none';
                        currentAction = null;
                        currentData = null;
                    }
                });
            }
            
            // Настройка админ-панели
            function setupAdminPanel() {
                // Переключение вкладок админ-панели
                const tabBtns = document.querySelectorAll('.tab-btn');
                tabBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const tabId = this.dataset.tab;
                        
                        // Убираем активный класс у всех кнопок и контента
                        tabBtns.forEach(b => b.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        // Добавляем активный класс текущей кнопке и контенту
                        this.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });
                
                // Кнопка входа в админ-панель
                if (loginBtn) {
                    loginBtn.addEventListener('click', function() {
                        const password = document.getElementById('admin-password').value;
                        const loginMessage = document.getElementById('login-message');
                        
                        // Простая проверка пароля (для демо)
                        if (password === 'admin123' || password === 'password') {
                            isAdminLoggedIn = true;
                            loginMessage.innerHTML = '<span style="color: green;">Вы успешно вошли!</span>';
                            
                            // Показываем все элементы админ-панели
                            document.querySelectorAll('.btn-primary').forEach(btn => {
                                btn.style.display = 'block';
                            });
                        } else {
                            loginMessage.innerHTML = '<span style="color: red;">Неверный пароль! Попробуйте снова.</span>';
                        }
                    });
                }
                
                // Кнопка добавления контактной карточки
                if (addContactCardBtn) {
                    addContactCardBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const newId = contactsData.length > 0 ? Math.max(...contactsData.map(c => c.id)) + 1 : 1;
                        
                        contactsData.push({
                            id: newId,
                            icon: 'user-tie',
                            title: 'Новая контактная карточка',
                            content: ['Введите информацию здесь']
                        });
                        
                        renderContactCards();
                        loadAdminForms();
                        showConfirmationModal('Контактная карточка успешно добавлена!', true);
                    });
                }
                
                // Кнопка добавления социальной сети
                if (addSocialLinkBtn) {
                    addSocialLinkBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const newId = socialData.length > 0 ? Math.max(...socialData.map(s => s.id)) + 1 : 1;
                        
                        socialData.push({
                            id: newId,
                            platform: 'vk',
                            url: 'https://example.com',
                            name: 'Новая социальная сеть'
                        });
                        
                        renderSocialLinks();
                        loadAdminForms();
                        showConfirmationModal('Социальная сеть успешно добавлена!', true);
                    });
                }
                
                // Кнопка обновления описания социальных сетей
                if (updateSocialDescriptionBtn) {
                    updateSocialDescriptionBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        settingsData.socialDescription = socialDescriptionInput.value;
                        socialDescription.textContent = socialDescriptionInput.value;
                        
                        localStorage.setItem('contactSettings', JSON.stringify(settingsData));
                        showConfirmationModal('Описание успешно обновлено!', true);
                    });
                }
                
                // Кнопка сохранения настроек
                if (saveSettingsBtn) {
                    saveSettingsBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        settingsData.contactFormEmail = document.getElementById('contact-form-email').value;
                        settingsData.successMessage = document.getElementById('contact-form-success-message').value;
                        settingsData.errorMessage = document.getElementById('contact-form-error-message').value;
                        
                        localStorage.setItem('contactSettings', JSON.stringify(settingsData));
                        showConfirmationModal('Настройки успешно сохранены!', true);
                    });
                }
            }
            
            // Загрузка форм админ-панели
            function loadAdminForms() {
                // Формы для контактных карточек
                contactsFormsContainer.innerHTML = '';
                
                contactsData.forEach((contact, index) => {
                    const contactForm = document.createElement('div');
                    contactForm.className = 'contact-admin-form';
                    contactForm.dataset.id = contact.id;
                    contactForm.style.marginBottom = '2rem';
                    contactForm.style.padding = '1.5rem';
                    contactForm.style.border = '1px solid #e0e0e0';
                    contactForm.style.borderRadius = '8px';
                    
                    contactForm.innerHTML = `
                        <h4>Карточка: ${contact.title}</h4>
                        <div class="form-group">
                            <label>Иконка</label>
                            <select class="form-control contact-icon-select" data-id="${contact.id}">
                                ${contactIcons.map(icon => 
                                    `<option value="${icon}" ${contact.icon === icon ? 'selected' : ''}>${icon}</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Заголовок</label>
                            <input type="text" class="form-control contact-title-input" data-id="${contact.id}" value="${contact.title}">
                        </div>
                        <div class="form-group">
                            <label>Содержимое (каждая строка - новый абзац)</label>
                            <textarea class="form-control contact-content-input" data-id="${contact.id}" rows="4">${contact.content.join('\n')}</textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn-primary update-contact-btn" data-id="${contact.id}">
                                <i class="fas fa-save"></i> Обновить
                            </button>
                            <button class="btn-danger delete-contact-btn" data-id="${contact.id}">
                                <i class="fas fa-trash"></i> Удалить
                            </button>
                        </div>
                    `;
                    
                    contactsFormsContainer.appendChild(contactForm);
                });
                
                // Формы для социальных сетей
                socialFormsContainer.innerHTML = '';
                
                socialData.forEach((social, index) => {
                    const socialForm = document.createElement('div');
                    socialForm.className = 'social-admin-form';
                    socialForm.dataset.id = social.id;
                    socialForm.style.marginBottom = '2rem';
                    socialForm.style.padding = '1.5rem';
                    socialForm.style.border = '1px solid #e0e0e0';
                    socialForm.style.borderRadius = '8px';
                    
                    socialForm.innerHTML = `
                        <h4>Социальная сеть: ${social.name}</h4>
                        <div class="form-group">
                            <label>Платформа</label>
                            <select class="form-control social-platform-select" data-id="${social.id}">
                                ${Object.keys(socialIcons).map(platform => 
                                    `<option value="${platform}" ${social.platform === platform ? 'selected' : ''}>${platform}</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Название</label>
                            <input type="text" class="form-control social-name-input" data-id="${social.id}" value="${social.name}">
                        </div>
                        <div class="form-group">
                            <label>URL</label>
                            <input type="text" class="form-control social-url-input" data-id="${social.id}" value="${social.url}">
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn-primary update-social-btn" data-id="${social.id}">
                                <i class="fas fa-save"></i> Обновить
                            </button>
                            <button class="btn-danger delete-social-btn" data-id="${social.id}">
                                <i class="fas fa-trash"></i> Удалить
                            </button>
                        </div>
                    `;
                    
                    socialFormsContainer.appendChild(socialForm);
                });
                
                // Добавляем обработчики событий для динамически созданных элементов
                setupAdminFormEventListeners();
            }
            
            // Настройка обработчиков событий для форм админ-панели
            function setupAdminFormEventListeners() {
                // Обновление контактных карточек
                document.querySelectorAll('.update-contact-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const id = parseInt(this.dataset.id);
                        const contactIndex = contactsData.findIndex(c => c.id === id);
                        
                        if (contactIndex !== -1) {
                            const iconSelect = document.querySelector(`.contact-icon-select[data-id="${id}"]`);
                            const titleInput = document.querySelector(`.contact-title-input[data-id="${id}"]`);
                            const contentInput = document.querySelector(`.contact-content-input[data-id="${id}"]`);
                            
                            contactsData[contactIndex].icon = iconSelect.value;
                            contactsData[contactIndex].title = titleInput.value;
                            contactsData[contactIndex].content = contentInput.value.split('\n');
                            
                            renderContactCards();
                            showConfirmationModal('Контактная карточка успешно обновлена!', true);
                        }
                    });
                });
                
                // Удаление контактных карточек
                document.querySelectorAll('.delete-contact-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const id = parseInt(this.dataset.id);
                        currentAction = 'deleteContact';
                        currentData = id;
                        
                        const contact = contactsData.find(c => c.id === id);
                        if (contact) {
                            showConfirmationModal(`Вы уверены, что хотите удалить контактную карточку "${contact.title}"?`, false);
                        }
                    });
                });
                
                // Обновление социальных сетей
                document.querySelectorAll('.update-social-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const id = parseInt(this.dataset.id);
                        const socialIndex = socialData.findIndex(s => s.id === id);
                        
                        if (socialIndex !== -1) {
                            const platformSelect = document.querySelector(`.social-platform-select[data-id="${id}"]`);
                            const nameInput = document.querySelector(`.social-name-input[data-id="${id}"]`);
                            const urlInput = document.querySelector(`.social-url-input[data-id="${id}"]`);
                            
                            socialData[socialIndex].platform = platformSelect.value;
                            socialData[socialIndex].name = nameInput.value;
                            socialData[socialIndex].url = urlInput.value;
                            
                            renderSocialLinks();
                            showConfirmationModal('Социальная сеть успешно обновлена!', true);
                        }
                    });
                });
                
                // Удаление социальных сетей
                document.querySelectorAll('.delete-social-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const id = parseInt(this.dataset.id);
                        currentAction = 'deleteSocial';
                        currentData = id;
                        
                        const social = socialData.find(s => s.id === id);
                        if (social) {
                            showConfirmationModal(`Вы уверены, что хотите удалить социальную сеть "${social.name}"?`, false);
                        }
                    });
                });
            }
            
            // Показать сообщение о необходимости входа
            function showLoginMessage() {
                const loginMessage = document.getElementById('login-message');
                if (loginMessage) {
                    loginMessage.innerHTML = '<span style="color: orange;">Пожалуйста, войдите в систему для выполнения этого действия.</span>';
                    
                    // Фокусируемся на поле ввода пароля
                    const passwordInput = document.getElementById('admin-password');
                    if (passwordInput) {
                        passwordInput.focus();
                    }
                }
            }
            
            // Показать модальное окно подтверждения
            function showConfirmationModal(message, isSuccess) {
                modalMessage.textContent = message;
                confirmationModal.style.display = 'flex';
                
                if (modalConfirm && modalCancel) {
                    if (isSuccess) {
                        // Если это сообщение об успехе, настраиваем кнопки по-другому
                        modalConfirm.textContent = 'OK';
                        modalConfirm.onclick = function() {
                            confirmationModal.style.display = 'none';
                        };
                        modalCancel.style.display = 'none';
                    } else {
                        // Если это запрос подтверждения
                        modalConfirm.textContent = 'Подтвердить';
                        modalCancel.style.display = 'inline-block';
                        
                        modalConfirm.onclick = function() {
                            confirmationModal.style.display = 'none';
                            executeCurrentAction();
                        };
                    }
                }
            }
            
            // Выполнить текущее действие
            function executeCurrentAction() {
                switch(currentAction) {
                    case 'deleteContact':
                        if (currentData !== null) {
                            contactsData = contactsData.filter(c => c.id !== currentData);
                            renderContactCards();
                            loadAdminForms();
                            showConfirmationModal('Контактная карточка успешно удалена!', true);
                        }
                        break;
                        
                    case 'deleteSocial':
                        if (currentData !== null) {
                            socialData = socialData.filter(s => s.id !== currentData);
                            renderSocialLinks();
                            loadAdminForms();
                            showConfirmationModal('Социальная сеть успешно удалена!', true);
                        }
                        break;
                }
                
                currentAction = null;
                currentData = null;
            }
            
            // Инициализация страницы
            initializePage();
            
            // Инициализация кнопки подтверждения в модальном окне
            if (modalConfirm) {
                modalConfirm.addEventListener('click', function() {
                    if (currentAction && currentData !== null) {
                        executeCurrentAction();
                    } else {
                        confirmationModal.style.display = 'none';
                    }
                });
            }
        });
    </script>
</body>
</html>
