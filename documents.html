<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Полезные документы | Комиссия по фигурному управлению мотоциклом | МФР</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <img src="images/logo.png" alt="Логотип комиссии">
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="about.html">О комиссии</a></li>
                    <li><a href="structure.html">Структура комиссии</a></li>
                    <li><a href="calendar.html">Календарь соревнований</a></li>
                    <li><a href="documents.html" class="active">Полезные документы</a></li>
                    <li><a href="contacts.html">Контакты</a></li>
                </ul>
            </nav>
        </header>

        <main class="content">
            <h1 class="page-title">Полезные документы</h1>
            
            <div class="documents-list">
                <div class="document-card">
                    <h3>Правила соревнований по фигурному управлению мотоциклом</h3>
                    <div class="document-date">15.01.2025</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Правила%20соревнований%20по%20ФУМ.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
                
                <div class="document-card">
                    <h3>Регламент Кубка России 2025</h3>
                    <div class="document-date">20.11.2024</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Регламент%20Кубка%20России%202025.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
                
                <div class="document-card">
                    <h3>Положение о присвоении спортивных разрядов</h3>
                    <div class="document-date">10.12.2024</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Положение%20о%20присвоении%20разрядов.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
                
                <div class="document-card">
                    <h3>Требования к экипировке спортсменов</h3>
                    <div class="document-date">30.11.2024</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Требования%20к%20экипировке.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
                
                <div class="document-card">
                    <h3>Медицинские требования для участия в соревнованиях</h3>
                    <div class="document-date">15.01.2025</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Медицинские%20требования.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
                
                <div class="document-card">
                    <h3>Список допущенных к участию в соревнованиях моделей мотоциклов</h3>
                    <div class="document-date">05.12.2024</div>
                    <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/Список%20мотоциклов.pdf" target="_blank" class="document-link">Скачать документ</a>
                </div>
            </div>
            
            <div class="admin-panel">
                <button id="edit-documents-btn" class="admin-btn">Редактировать список документов</button>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-logos">
                <a href="https://www.mfr.ru/" target="_blank">
                    <img src="images/mfr-logo.png" alt="Логотип МФР">
                </a>
                <a href="https://www.minsport.gov.ru/" target="_blank">
                    <img src="images/minsport-logo.png" alt="Логотип Министерства спорта РФ">
                </a>
            </div>
            <div class="footer-links">
                <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw" target="_blank">Документы комиссии</a>
                <a href="https://www.mfr.ru/" target="_blank">Официальный сайт МФР</a>
                <a href="https://www.mfr.ru/disciplines/motodzhimkhana/" target="_blank">Страница мотоджимханы на сайте МФР</a>
            </div>
            <div class="copyright">
                © 2025 Федерация мотоциклетного спорта России
            </div>
        </footer>
    </div>
    
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Редактирование списка документов</h2>
            <div id="documents-editor"></div>
            <button id="save-documents-btn" class="admin-btn">Сохранить изменения</button>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Редактирование документов
            document.getElementById('edit-documents-btn').addEventListener('click', function() {
                const documentCards = document.querySelectorAll('.document-card');
                
                let editorHTML = `
                    <div id="editor-documents">
                `;
                
                documentCards.forEach((card, index) => {
                    const title = card.querySelector('h3').textContent;
                    const date = card.querySelector('.document-date').textContent;
                    const link = card.querySelector('.document-link').getAttribute('href');
                    
                    editorHTML += `
                        <div class="editor-document" data-index="${index}">
                            <div class="form-group">
                                <label>Название документа:</label>
                                <input type="text" class="title-input" value="${title}">
                            </div>
                            <div class="form-group">
                                <label>Дата публикации:</label>
                                <input type="text" class="date-input" value="${date}">
                            </div>
                            <div class="form-group">
                                <label>Ссылка на документ:</label>
                                <input type="text" class="link-input" value="${link}">
                            </div>
                            <button class="delete-document-btn" data-index="${index}">Удалить документ</button>
                        </div>
                    `;
                });
                
                editorHTML += `
                    </div>
                    <button id="add-document-btn" class="admin-btn">Добавить документ</button>
                `;
                
                document.getElementById('documents-editor').innerHTML = editorHTML;
                document.getElementById('admin-modal').style.display = 'block';
                
                // Добавление нового документа
                document.getElementById('add-document-btn').addEventListener('click', function() {
                    const editorDocuments = document.getElementById('editor-documents');
                    const newIndex = editorDocuments.children.length;
                    
                    const newDocument = document.createElement('div');
                    newDocument.className = 'editor-document';
                    newDocument.setAttribute('data-index', newIndex);
                    newDocument.innerHTML = `
                        <div class="form-group">
                            <label>Название документа:</label>
                            <input type="text" class="title-input" value="">
                        </div>
                        <div class="form-group">
                            <label>Дата публикации:</label>
                            <input type="text" class="date-input" value="">
                        </div>
                        <div class="form-group">
                            <label>Ссылка на документ:</label>
                            <input type="text" class="link-input" value="https://disk.yandex.ru/d/ubxzU_0RzkFsJw/">
                        </div>
                        <button class="delete-document-btn" data-index="${newIndex}">Удалить документ</button>
                    `;
                    editorDocuments.appendChild(newDocument);
                });
                
                // Удаление документа
                document.querySelectorAll('.delete-document-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = this.getAttribute('data-index');
                        const document = document.querySelector(`.editor-document[data-index="${index}"]`);
                        if (document) document.remove();
                    });
                });
            });
            
            // Закрытие модального окна
            document.querySelector('.close').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'none';
            });
            
            // Сохранение изменений в документах
            document.getElementById('save-documents-btn').addEventListener('click', function() {
                const editorDocuments = document.querySelectorAll('.editor-document');
                const documents = [];
                
                editorDocuments.forEach(doc => {
                    const title = doc.querySelector('.title-input').value.trim();
                    const date = doc.querySelector('.date-input').value.trim();
                    const link = doc.querySelector('.link-input').value.trim();
                    
                    if (title && date && link) {
                        documents.push({
                            title,
                            date,
                            link
                        });
                    }
                });
                
                // Сохранение в localStorage
                localStorage.setItem('documentsList', JSON.stringify(documents));
                
                // Обновление списка документов на странице
                const documentsList = document.querySelector('.documents-list');
                documentsList.innerHTML = '';
                
                documents.forEach(doc => {
                    const card = document.createElement('div');
                    card.className = 'document-card';
                    card.innerHTML = `
                        <h3>${doc.title}</h3>
                        <div class="document-date">${doc.date}</div>
                        <a href="${doc.link}" target="_blank" class="document-link">Скачать документ</a>
                    `;
                    documentsList.appendChild(card);
                });
                
                document.getElementById('admin-modal').style.display = 'none';
            });
            
            // Загрузка данных из localStorage при загрузке страницы
            const savedDocuments = localStorage.getItem('documentsList');
            if (savedDocuments) {
                try {
                    const documents = JSON.parse(savedDocuments);
                    const documentsList = document.querySelector('.documents-list');
                    documentsList.innerHTML = '';
                    
                    documents.forEach(doc => {
                        const card = document.createElement('div');
                        card.className = 'document-card';
                        card.innerHTML = `
                            <h3>${doc.title}</h3>
                            <div class="document-date">${doc.date}</div>
                            <a href="${doc.link}" target="_blank" class="document-link">Скачать документ</a>
                        `;
                        documentsList.appendChild(card);
                    });
                } catch (e) {
                    console.error('Ошибка при загрузке данных из localStorage:', e);
                }
            }
        });
    </script>
</body>
</html>
