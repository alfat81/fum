<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Структура комиссии | Комиссия по фигурному управлению мотоциклом | МФР</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-container">
                <div class="logo-left">
                    <img src="images/logo_sm.png" alt="Логотип комиссии" class="logo-img">
                </div>
                <div class="logo-right">
                    <div class="official-name">МОТОЦИКЛЕТНАЯ ФЕДЕРАЦИЯ РОССИИ</div>
                    <div class="commission-name">КОМИССИЯ ПО ФИГУРНОМУ УПРАВЛЕНИЮ МОТОЦИКЛОМ (МОТОДЖИМХАНА)</div>
                </div>
            </div>
            <button class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="nav-link">Главная</a></li>
                    <li><a href="about.html" class="nav-link">О комиссии</a></li>
                    <li><a href="structure.html" class="nav-link active">Структура комиссии</a></li>
                    <li><a href="calendar.html" class="nav-link">Календарь соревнований</a></li>
                    <li><a href="documents.html" class="nav-link">Полезные документы</a></li>
                    <li><a href="contacts.html" class="nav-link">Контакты</a></li>
                    <li><a href="partners.html" class="nav-link">Партнеры</a></li>
                </ul>
            </nav>
            
            <!-- Mobile menu -->
            <nav class="mobile-menu">
                <div class="mobile-nav">
                    <ul>
                        <li><a href="index.html" class="nav-link">Главная</a></li>
                        <li><a href="about.html" class="nav-link">О комиссии</a></li>
                        <li><a href="structure.html" class="nav-link active">Структура комиссии</a></li>
                        <li><a href="calendar.html" class="nav-link">Календарь соревнований</a></li>
                        <li><a href="documents.html" class="nav-link">Полезные документы</a></li>
                        <li><a href="contacts.html" class="nav-link">Контакты</a></li>
                        <li><a href="partners.html" class="nav-link">Партнеры</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <main class="content">
            <h1 class="page-title">Структура комиссии</h1>
            
            <section class="leadership-section">
                <h2 class="section-title">Руководство комиссии</h2>
                
                <div class="leadership-grid" id="leadership-container">
                    <!-- Динамически заполняется через JavaScript -->
                    <div class="leader-card leader-blue">
                        <div class="leader-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Дмитрий Серов</h3>
                            <div class="leader-position">Председатель Комиссии</div>
                            <div class="leader-region">Тверская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (977) 823-63-90<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-yellow">
                        <div class="leader-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Алексей Фатьянов</h3>
                            <div class="leader-position">Заместитель Председателя</div>
                            <div class="leader-region">Нижний Новгород</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (920) 111-91-77<br>
                                <i class="fas fa-envelope"></i> motogymkhana-nn@yandex.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-blue">
                        <div class="leader-icon">
                            <i class="fas fa-file-signature"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Наталия Недайводина</h3>
                            <div class="leader-position">Главный секретарь</div>
                            <div class="leader-region">Вологодская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (911) 456-78-90<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-red">
                        <div class="leader-icon">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Глеб Симдянкин</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Смоленская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (910) 345-67-89<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-yellow">
                        <div class="leader-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Андрей Сальников</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Ульяновская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (923) 567-89-01<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-blue">
                        <div class="leader-icon">
                            <i class="fas fa-child"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Ильшат Сафаров</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Республика Татарстан</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (934) 678-90-12<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-red">
                        <div class="leader-icon">
                            <i class="fas fa-child"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Максим Гаранин</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Калужская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (945) 789-01-23<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-yellow">
                        <div class="leader-icon">
                            <i class="fas fa-motorcycle"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Александр Акимов</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Тульская область</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (956) 890-12-34<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                    
                    <div class="leader-card leader-blue">
                        <div class="leader-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">Александр Ципилев</h3>
                            <div class="leader-position">Член Комиссии</div>
                            <div class="leader-region">Москва, МОО "Федерация Мотоджимханы"</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> +7 (903) 123-45-67<br>
                                <i class="fas fa-envelope"></i> serovdima@list.ru
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="regions-section">
                <h2 class="section-title">Региональные представители</h2>
                
                <div class="regions-table-container">
                    <table class="regions-table">
                        <thead>
                            <tr>
                                <th>Регион</th>
                                <th>И.О. Фамилия</th>
                                <th>Должность</th>
                                <th>Телефон</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody id="regions-table-body">
                            <!-- Динамически заполняется через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="footer-logos">
                <a href="https://www.mfr.ru/" target="_blank">
                    <img src="images/mfr_logo.png" alt="Логотип МФР">
                </a>
                <a href="https://www.minsport.gov.ru/" target="_blank">
                    <img src="images/logo_minsport.png" alt="Логотип Министерства спорта РФ">
                </a>
            </div>
            <div class="footer-links">
                <a href="documents.html" class="document-link">Документы комиссии</a>
                <a href="https://www.mfr.ru/" target="_blank">Официальный сайт МФР</a>
                <a href="https://www.mfr.ru/disciplines/motodzhimkhana/" target="_blank">Страница мотоджимханы на сайте МФР</a>
            </div>
            <div class="copyright">
                © 2025 Мотоциклетная Федерация России
            </div>
        </footer>
    </div>

    <!-- Admin tab -->
    <div class="admin-tab" id="admin-tab">
        <i class="fas fa-cog"></i>
    </div>

    <!-- Admin panel -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-header">
            <h2>Админ-панель</h2>
            <button class="close-admin-panel" id="close-admin-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="calendar">Календарь соревнований</button>
            <button class="tab-btn" data-tab="documents">Документы</button>
            <button class="tab-btn" data-tab="structure">Структура комиссии</button>
            <button class="tab-btn" data-tab="regions">Регионы</button>
        </div>
        
        <div class="tab-content active" id="calendar-tab">
            <h3>Управление соревнованиями</h3>
            <div class="form-group">
                <label for="competition-name">Название соревнования</label>
                <input type="text" id="competition-name" class="form-control" placeholder="Введите название соревнования">
            </div>
            <div class="form-group">
                <label for="competition-date">Дата проведения</label>
                <input type="date" id="competition-date" class="form-control">
            </div>
            <div class="form-group">
                <label for="competition-location">Место проведения</label>
                <input type="text" id="competition-location" class="form-control" placeholder="Введите место проведения">
            </div>
            <div class="form-group">
                <label for="competition-contact">Контактное лицо</label>
                <input type="text" id="competition-contact" class="form-control" placeholder="Введите контактное лицо">
            </div>
            <div class="form-group">
                <label for="protocol-upload">Протокол соревнований</label>
                <input type="file" id="protocol-upload" class="form-control" accept=".pdf,.doc,.docx">
                <p class="help-text">Все протоколы автоматически загружаются в Яндекс.Диск</p>
            </div>
            <button id="add-competition-btn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Добавить соревнование
            </button>
            <div id="competitions-list" class="admin-list"></div>
        </div>
        
        <div class="tab-content" id="documents-tab">
            <h3>Управление документами</h3>
            <div class="form-group">
                <label for="document-name">Название документа</label>
                <input type="text" id="document-name" class="form-control" placeholder="Введите название документа">
            </div>
            <div class="form-group">
                <label for="document-upload">Файл документа</label>
                <input type="file" id="document-upload" class="form-control" accept=".pdf,.doc,.docx">
                <p class="help-text">Все документы автоматически загружаются в Яндекс.Диск</p>
            </div>
            <div class="form-group">
                <label for="document-category">Категория документа</label>
                <select id="document-category" class="form-control">
                    <option value="rules">Правила</option>
                    <option value="regulations">Регламенты</option>
                    <option value="licenses">Лицензии</option>
                    <option value="other">Прочее</option>
                </select>
            </div>
            <button id="add-document-btn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Добавить документ
            </button>
            <div id="documents-list" class="admin-list"></div>
        </div>
        
        <div class="tab-content" id="structure-tab">
            <h3>Управление структурой комиссии</h3>
            <div class="form-group">
                <label for="leader-name">Ф.И.О. руководителя</label>
                <input type="text" id="leader-name" class="form-control" placeholder="Введите ФИО">
            </div>
            <div class="form-group">
                <label for="leader-position">Должность</label>
                <input type="text" id="leader-position" class="form-control" placeholder="Введите должность">
            </div>
            <div class="form-group">
                <label for="leader-region">Регион</label>
                <input type="text" id="leader-region" class="form-control" placeholder="Введите регион">
            </div>
            <div class="form-group">
                <label for="leader-phone">Телефон</label>
                <input type="tel" id="leader-phone" class="form-control" placeholder="+7 (XXX) XXX-XX-XX">
            </div>
            <div class="form-group">
                <label for="leader-email">Email</label>
                <input type="email" id="leader-email" class="form-control" placeholder="Введите email">
            </div>
            <div class="form-group">
                <label for="leader-icon">Иконка</label>
                <select id="leader-icon" class="form-control">
                    <option value="crown">Председатель</option>
                    <option value="user-tie">Заместитель</option>
                    <option value="file-signature">Секретарь</option>
                    <option value="medal">Спортивное достижение</option>
                    <option value="history">История</option>
                    <option value="child">Детский</option>
                    <option value="motorcycle">Мотоцикл</option>
                    <option value="building">Организация</option>
                </select>
            </div>
            <div class="form-group">
                <label for="leader-color">Цвет карточки</label>
                <select id="leader-color" class="form-control">
                    <option value="blue">Синий</option>
                    <option value="yellow">Желтый</option>
                    <option value="red">Красный</option>
                </select>
            </div>
            <button id="add-leader-btn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Добавить руководителя
            </button>
            <div id="leaders-list" class="admin-list"></div>
        </div>
        
        <div class="tab-content" id="regions-tab">
            <h3>Управление региональными представителями</h3>
            <div class="form-group">
                <label for="region-name">Регион</label>
                <input type="text" id="region-name" class="form-control" placeholder="Введите название региона">
            </div>
            <div class="form-group">
                <label for="representative-name">Ф.И.О. представителя</label>
                <input type="text" id="representative-name" class="form-control" placeholder="Введите ФИО">
            </div>
            <div class="form-group">
                <label for="representative-position">Должность</label>
                <input type="text" id="representative-position" class="form-control" placeholder="Введите должность">
            </div>
            <div class="form-group">
                <label for="representative-phone">Телефон</label>
                <input type="tel" id="representative-phone" class="form-control" placeholder="+7 (XXX) XXX-XX-XX">
            </div>
            <div class="form-group">
                <label for="representative-email">Email</label>
                <input type="email" id="representative-email" class="form-control" placeholder="Введите email">
            </div>
            <button id="add-region-btn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Добавить представителя
            </button>
            <div id="regions-list" class="admin-list"></div>
        </div>

        <div class="admin-login">
            <div class="form-group">
                <label for="admin-password">Пароль</label>
                <input type="password" id="admin-password" class="form-control" placeholder="Введите пароль">
            </div>
            <button class="btn btn-secondary" id="login-admin-btn">Войти</button>
            <p id="login-message" class="login-message"></p>
        </div>
    </div>

    <!-- Модальное окно подтверждения -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content">
            <h3>Подтверждение действия</h3>
            <p id="modal-message">Вы уверены, что хотите выполнить это действие?</p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="modal-cancel">Отмена</button>
                <button class="btn btn-primary" id="modal-confirm">Подтвердить</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы управления админ-панелью
            const adminTab = document.getElementById('admin-tab');
            const adminPanel = document.getElementById('admin-panel');
            const closeAdminPanel = document.getElementById('close-admin-panel');
            
            // Элементы модального окна
            const confirmationModal = document.getElementById('confirmation-modal');
            const modalMessage = document.getElementById('modal-message');
            const modalCancel = document.getElementById('modal-cancel');
            const modalConfirm = document.getElementById('modal-confirm');
            
            // Элементы для управления структурой
            const leadershipContainer = document.getElementById('leadership-container');
            const regionsTableBody = document.getElementById('regions-table-body');
            
            // Переменные для управления состоянием
            let isAdminLoggedIn = false;
            let currentAction = null;
            let currentData = null;
            
            // Иконки для карточек руководителей
            const iconMap = {
                'crown': 'fas fa-crown',
                'user-tie': 'fas fa-user-tie',
                'file-signature': 'fas fa-file-signature',
                'medal': 'fas fa-medal',
                'history': 'fas fa-history',
                'child': 'fas fa-child',
                'motorcycle': 'fas fa-motorcycle',
                'building': 'fas fa-building'
            };
            
            // Цвета для карточек руководителей
            const colorClasses = {
                'blue': 'leader-blue',
                'yellow': 'leader-yellow',
                'red': 'leader-red'
            };
            
            // Загружаем данные из localStorage или используем начальные данные
            let leadersData = JSON.parse(localStorage.getItem('leadersData')) || [
                {
                    name: "Дмитрий Серов",
                    position: "Председатель Комиссии",
                    region: "Тверская область",
                    phone: "+7 (977) 823-63-90",
                    email: "serovdima@list.ru",
                    icon: "crown",
                    color: "blue"
                },
                {
                    name: "Алексей Фатьянов",
                    position: "Заместитель Председателя",
                    region: "Нижний Новгород",
                    phone: "+7 (920) 111-91-77",
                    email: "motogymkhana-nn@yandex.ru",
                    icon: "user-tie",
                    color: "yellow"
                },
                {
                    name: "Наталия Недайводина",
                    position: "Главный секретарь",
                    region: "Вологодская область",
                    phone: "+7 (911) 456-78-90",
                    email: "serovdima@list.ru",
                    icon: "file-signature",
                    color: "blue"
                },
                {
                    name: "Глеб Симдянкин",
                    position: "Член Комиссии",
                    region: "Смоленская область",
                    phone: "+7 (910) 345-67-89",
                    email: "serovdima@list.ru",
                    icon: "medal",
                    color: "red"
                },
                {
                    name: "Андрей Сальников",
                    position: "Член Комиссии",
                    region: "Ульяновская область",
                    phone: "+7 (923) 567-89-01",
                    email: "serovdima@list.ru",
                    icon: "history",
                    color: "yellow"
                },
                {
                    name: "Ильшат Сафаров",
                    position: "Член Комиссии",
                    region: "Республика Татарстан",
                    phone: "+7 (934) 678-90-12",
                    email: "serovdima@list.ru",
                    icon: "child",
                    color: "blue"
                },
                {
                    name: "Максим Гаранин",
                    position: "Член Комиссии",
                    region: "Калужская область",
                    phone: "+7 (945) 789-01-23",
                    email: "serovdima@list.ru",
                    icon: "child",
                    color: "red"
                },
                {
                    name: "Александр Акимов",
                    position: "Член Комиссии",
                    region: "Тульская область",
                    phone: "+7 (956) 890-12-34",
                    email: "serovdima@list.ru",
                    icon: "motorcycle",
                    color: "yellow"
                },
                {
                    name: "Александр Ципилев",
                    position: "Член Комиссии",
                    region: "Москва, МОО 'Федерация Мотоджимханы'",
                    phone: "+7 (903) 123-45-67",
                    email: "serovdima@list.ru",
                    icon: "building",
                    color: "blue"
                }
            ];
            
            let regionsData = JSON.parse(localStorage.getItem('regionsData')) || [
                {
                    region: "Тверская область",
                    name: "Дмитрий Серов",
                    position: "Председатель Комиссии",
                    phone: "+7 (977) 823-63-90",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Нижний Новгород",
                    name: "Алексей Фатьянов",
                    position: "Заместитель Председателя",
                    phone: "+7 (920) 111-91-77",
                    email: "motogymkhana-nn@yandex.ru"
                },
                {
                    region: "Вологодская область",
                    name: "Наталия Недайводина",
                    position: "Главный секретарь",
                    phone: "+7 (911) 456-78-90",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Смоленская область",
                    name: "Глеб Симдянкин",
                    position: "Член Комиссии",
                    phone: "+7 (910) 345-67-89",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Ульяновская область",
                    name: "Андрей Сальников",
                    position: "Член Комиссии",
                    phone: "+7 (923) 567-89-01",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Республика Татарстан",
                    name: "Ильшат Сафаров",
                    position: "Член Комиссии",
                    phone: "+7 (934) 678-90-12",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Калужская область",
                    name: "Максим Гаранин",
                    position: "Член Комиссии",
                    phone: "+7 (945) 789-01-23",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Тульская область",
                    name: "Александр Акимов",
                    position: "Член Комиссии",
                    phone: "+7 (956) 890-12-34",
                    email: "serovdima@list.ru"
                },
                {
                    region: "Москва",
                    name: "Александр Ципилев",
                    position: "Член Комиссии",
                    phone: "+7 (903) 123-45-67",
                    email: "serovdima@list.ru"
                }
            ];
            
            // Инициализация страницы
            function initializePage() {
                renderLeaders();
                renderRegions();
                setupEventListeners();
                setupAdminPanel();
                loadAdminLists();
            }
            
            // Рендер карточек руководителей
            function renderLeaders() {
                leadershipContainer.innerHTML = '';
                
                leadersData.forEach((leader, index) => {
                    const leaderCard = document.createElement('div');
                    leaderCard.className = `leader-card ${colorClasses[leader.color] || 'leader-blue'}`;
                    leaderCard.dataset.index = index;
                    
                    leaderCard.innerHTML = `
                        <div class="leader-icon">
                            <i class="${iconMap[leader.icon] || 'fas fa-user'}"></i>
                        </div>
                        <div class="leader-info">
                            <h3 class="leader-name">${leader.name}</h3>
                            <div class="leader-position">${leader.position}</div>
                            <div class="leader-region">${leader.region}</div>
                            <div class="leader-contact">
                                <i class="fas fa-phone"></i> ${leader.phone}<br>
                                <i class="fas fa-envelope"></i> ${leader.email}
                            </div>
                        </div>
                    `;
                    
                    leadershipContainer.appendChild(leaderCard);
                });
                
                // Сохраняем данные в localStorage
                localStorage.setItem('leadersData', JSON.stringify(leadersData));
            }
            
            // Рендер таблицы регионов
            function renderRegions() {
                regionsTableBody.innerHTML = '';
                
                regionsData.forEach((region, index) => {
                    const row = document.createElement('tr');
                    row.dataset.index = index;
                    
                    row.innerHTML = `
                        <td>${region.region}</td>
                        <td>${region.name}</td>
                        <td>${region.position}</td>
                        <td>${region.phone}</td>
                        <td>${region.email}</td>
                    `;
                    
                    regionsTableBody.appendChild(row);
                });
                
                // Сохраняем данные в localStorage
                localStorage.setItem('regionsData', JSON.stringify(regionsData));
            }
            
            // Настройка обработчиков событий
            function setupEventListeners() {
                // Админ-панель
                if (adminTab) {
                    adminTab.addEventListener('click', function() {
                        adminPanel.style.right = '0';
                    });
                }
                
                if (closeAdminPanel) {
                    closeAdminPanel.addEventListener('click', function() {
                        adminPanel.style.right = '-400px';
                    });
                }
                
                // Мобильное меню
                const menuToggle = document.querySelector('.menu-toggle');
                const mobileMenu = document.querySelector('.mobile-menu');
                
                if (menuToggle && mobileMenu) {
                    menuToggle.addEventListener('click', function() {
                        mobileMenu.classList.toggle('active');
                        menuToggle.querySelector('i').classList.toggle('fa-bars');
                        menuToggle.querySelector('i').classList.toggle('fa-times');
                    });
                }
                
                // Модальное окно
                if (modalCancel) {
                    modalCancel.addEventListener('click', function() {
                        confirmationModal.style.display = 'none';
                        currentAction = null;
                        currentData = null;
                    });
                }
                
                // Закрытие модального окна при клике вне его
                window.addEventListener('click', function(event) {
                    if (event.target === confirmationModal) {
                        confirmationModal.style.display = 'none';
                        currentAction = null;
                        currentData = null;
                    }
                });
            }
            
            // Настройка админ-панели
            function setupAdminPanel() {
                // Переключение вкладок админ-панели
                const tabBtns = document.querySelectorAll('.tab-btn');
                tabBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const tabId = this.dataset.tab;
                        
                        // Убираем активный класс у всех кнопок и контента
                        tabBtns.forEach(b => b.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        // Добавляем активный класс текущей кнопке и контенту
                        this.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });
                
                // Кнопка входа в админ-панель
                const loginBtn = document.getElementById('login-admin-btn');
                if (loginBtn) {
                    loginBtn.addEventListener('click', function() {
                        const password = document.getElementById('admin-password').value;
                        const loginMessage = document.getElementById('login-message');
                        
                        // Простая проверка пароля (для демо)
                        if (password === 'admin123' || password === 'password') {
                            isAdminLoggedIn = true;
                            loginMessage.textContent = 'Вы успешно вошли!';
                            loginMessage.style.color = 'green';
                            
                            // Показываем формы админ-панели
                            document.querySelectorAll('.tab-content').forEach(tab => {
                                tab.style.display = 'block';
                            });
                            
                            // Скрываем форму входа
                            document.querySelector('.admin-login').style.display = 'none';
                            
                            // Показываем кнопки добавления
                            document.querySelectorAll('.btn-primary').forEach(btn => {
                                btn.style.display = 'block';
                            });
                        } else {
                            loginMessage.textContent = 'Неверный пароль! Попробуйте снова.';
                            loginMessage.style.color = 'red';
                        }
                    });
                }
                
                // Кнопка добавления руководителя
                const addLeaderBtn = document.getElementById('add-leader-btn');
                if (addLeaderBtn) {
                    addLeaderBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const name = document.getElementById('leader-name').value;
                        const position = document.getElementById('leader-position').value;
                        const region = document.getElementById('leader-region').value;
                        const phone = document.getElementById('leader-phone').value;
                        const email = document.getElementById('leader-email').value;
                        const icon = document.getElementById('leader-icon').value;
                        const color = document.getElementById('leader-color').value;
                        
                        // Валидация
                        if (!name || !position || !region || !phone || !email) {
                            showConfirmationModal('Пожалуйста, заполните все обязательные поля.', false);
                            return;
                        }
                        
                        // Добавляем нового руководителя
                        leadersData.push({
                            name,
                            position,
                            region,
                            phone,
                            email,
                            icon,
                            color
                        });
                        
                        // Обновляем отображение
                        renderLeaders();
                        loadAdminLists();
                        
                        // Очищаем форму
                        document.getElementById('leader-name').value = '';
                        document.getElementById('leader-position').value = '';
                        document.getElementById('leader-region').value = '';
                        document.getElementById('leader-phone').value = '';
                        document.getElementById('leader-email').value = '';
                        
                        // Показываем сообщение об успехе
                        showConfirmationModal('Руководитель успешно добавлен!', true);
                    });
                }
                
                // Кнопка добавления регионального представителя
                const addRegionBtn = document.getElementById('add-region-btn');
                if (addRegionBtn) {
                    addRegionBtn.addEventListener('click', function() {
                        if (!isAdminLoggedIn) {
                            showLoginMessage();
                            return;
                        }
                        
                        const regionName = document.getElementById('region-name').value;
                        const representativeName = document.getElementById('representative-name').value;
                        const position = document.getElementById('representative-position').value;
                        const phone = document.getElementById('representative-phone').value;
                        const email = document.getElementById('representative-email').value;
                        
                        // Валидация
                        if (!regionName || !representativeName || !position || !phone || !email) {
                            showConfirmationModal('Пожалуйста, заполните все обязательные поля.', false);
                            return;
                        }
                        
                        // Добавляем нового представителя
                        regionsData.push({
                            region: regionName,
                            name: representativeName,
                            position: position,
                            phone: phone,
                            email: email
                        });
                        
                        // Обновляем отображение
                        renderRegions();
                        loadAdminLists();
                        
                        // Очищаем форму
                        document.getElementById('region-name').value = '';
                        document.getElementById('representative-name').value = '';
                        document.getElementById('representative-position').value = '';
                        document.getElementById('representative-phone').value = '';
                        document.getElementById('representative-email').value = '';
                        
                        // Показываем сообщение об успехе
                        showConfirmationModal('Региональный представитель успешно добавлен!', true);
                    });
                }
            }
            
            // Загрузка списков в админ-панели
            function loadAdminLists() {
                // Список руководителей
                const leadersList = document.getElementById('leaders-list');
                if (leadersList) {
                    leadersList.innerHTML = '';
                    
                    leadersData.forEach((leader, index) => {
                        const leaderItem = document.createElement('div');
                        leaderItem.className = 'admin-list-item';
                        leaderItem.innerHTML = `
                            <div class="item-info">
                                <strong>${leader.name}</strong> - ${leader.position}
                                <div class="item-details">${leader.region}</div>
                            </div>
                            <button class="btn btn-small btn-danger delete-leader" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        `;
                        
                        leadersList.appendChild(leaderItem);
                    });
                    
                    // Добавляем обработчики удаления
                    document.querySelectorAll('.delete-leader').forEach(btn => {
                        btn.addEventListener('click', function() {
                            if (!isAdminLoggedIn) {
                                showLoginMessage();
                                return;
                            }
                            
                            const index = parseInt(this.dataset.index);
                            currentAction = 'deleteLeader';
                            currentData = index;
                            
                            showConfirmationModal(
                                `Вы уверены, что хотите удалить руководителя "${leadersData[index].name}"?`, 
                                false
                            );
                        });
                    });
                }
                
                // Список регионов
                const regionsList = document.getElementById('regions-list');
                if (regionsList) {
                    regionsList.innerHTML = '';
                    
                    regionsData.forEach((region, index) => {
                        const regionItem = document.createElement('div');
                        regionItem.className = 'admin-list-item';
                        regionItem.innerHTML = `
                            <div class="item-info">
                                <strong>${region.region}</strong> - ${region.name}
                                <div class="item-details">${region.position}</div>
                            </div>
                            <button class="btn btn-small btn-danger delete-region" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        `;
                        
                        regionsList.appendChild(regionItem);
                    });
                    
                    // Добавляем обработчики удаления
                    document.querySelectorAll('.delete-region').forEach(btn => {
                        btn.addEventListener('click', function() {
                            if (!isAdminLoggedIn) {
                                showLoginMessage();
                                return;
                            }
                            
                            const index = parseInt(this.dataset.index);
                            currentAction = 'deleteRegion';
                            currentData = index;
                            
                            showConfirmationModal(
                                `Вы уверены, что хотите удалить представителя "${regionsData[index].name}" из региона "${regionsData[index].region}"?`, 
                                false
                            );
                        });
                    });
                }
            }
            
            // Показать сообщение о необходимости входа
            function showLoginMessage() {
                const loginMessage = document.getElementById('login-message');
                loginMessage.textContent = 'Пожалуйста, войдите в систему для выполнения этого действия.';
                loginMessage.style.color = 'orange';
                
                // Показываем форму входа
                document.querySelector('.admin-login').style.display = 'block';
                document.getElementById('admin-password').focus();
            }
            
            // Показать модальное окно подтверждения
            function showConfirmationModal(message, isSuccess) {
                modalMessage.textContent = message;
                confirmationModal.style.display = 'block';
                
                if (isSuccess) {
                    // Если это сообщение об успехе, настраиваем кнопки по-другому
                    modalConfirm.textContent = 'OK';
                    modalConfirm.onclick = function() {
                        confirmationModal.style.display = 'none';
                    };
                    modalCancel.style.display = 'none';
                } else {
                    // Если это запрос подтверждения
                    modalConfirm.textContent = 'Подтвердить';
                    modalCancel.style.display = 'block';
                    
                    modalConfirm.onclick = function() {
                        confirmationModal.style.display = 'none';
                        executeCurrentAction();
                    };
                }
            }
            
            // Выполнить текущее действие
            function executeCurrentAction() {
                switch(currentAction) {
                    case 'deleteLeader':
                        if (currentData !== null) {
                            leadersData.splice(currentData, 1);
                            renderLeaders();
                            loadAdminLists();
                            showConfirmationModal('Руководитель успешно удален!', true);
                        }
                        break;
                        
                    case 'deleteRegion':
                        if (currentData !== null) {
                            regionsData.splice(currentData, 1);
                            renderRegions();
                            loadAdminLists();
                            showConfirmationModal('Региональный представитель успешно удален!', true);
                        }
                        break;
                }
                
                currentAction = null;
                currentData = null;
            }
            
            // Инициализация страницы
            initializePage();
        });
    </script>
</body>
</html>
