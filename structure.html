<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Структура комиссии | Комиссия по фигурному управлению мотоциклом | МФР</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <img src="images/logo.png" alt="Логотип комиссии">
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="about.html">О комиссии</a></li>
                    <li><a href="structure.html" class="active">Структура комиссии</a></li>
                    <li><a href="calendar.html">Календарь соревнований</a></li>
                    <li><a href="documents.html">Полезные документы</a></li>
                    <li><a href="contacts.html">Контакты</a></li>
                </ul>
            </nav>
        </header>

        <main class="content">
            <h1 class="page-title">Структура комиссии</h1>
            
            <div class="leadership">
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/d59/vikt2s29rmx9a40mhz64l1i71tfpayy5/Дмитрий%20Серов.jpg" alt="Дмитрий Серов">
                    </div>
                    <div class="leader-info">
                        <h2>Дмитрий Серов</h2>
                        <div class="position">Председатель Комиссии</div>
                        <div class="region">Тверская область</div>
                        <div class="contact">
                            <span>+7 (977) 823-63-90</span>
                            <span>serovdima@list.ru</span>
                        </div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/6da/yfchzqsfi7av4bnnge9r5jug1z357601/Алексей%20Фатьянов.jpg" alt="Алексей Фатьянов">
                    </div>
                    <div class="leader-info">
                        <h2>Алексей Фатьянов</h2>
                        <div class="position">Заместитель Председателя</div>
                        <div class="region">Нижний Новгород</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/8d7/0rdvpnrfz1wmxswvgbiiy972fk2czmsv/Наталия%20Недайводина.jpg" alt="Наталия Недайводина">
                    </div>
                    <div class="leader-info">
                        <h2>Наталия Недайводина</h2>
                        <div class="position">Главный секретарь</div>
                        <div class="region">Вологодская область</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/0f6/kcmcx7epsjpld77hth8mgvvo8dyxnz3c/Глеб%20Симдянкин.jpg" alt="Глеб Симдянкин">
                    </div>
                    <div class="leader-info">
                        <h2>Глеб Симдянкин</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Смоленская область</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/6d9/708xnufz29dsshu5v28zgc9gg4ovxslk/Андрей%20сальников.jpg" alt="Андрей Сальников">
                    </div>
                    <div class="leader-info">
                        <h2>Андрей Сальников</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Ульяновская область</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/19c/b6ypbb11ifgi8m28811rm4gcnt1en62u/Ильшат%20Сафаров.jpg" alt="Ильшат Сафаров">
                    </div>
                    <div class="leader-info">
                        <h2>Ильшат Сафаров</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Республика Татарстан</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/026/exok2huzhglr5cqq0sxw8ihh0g1astay/Максим%20Гаранин.jpg" alt="Максим Гаранин">
                    </div>
                    <div class="leader-info">
                        <h2>Максим Гаранин</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Калужская область</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/fb8/06x31ifws29zsbvd2zqrfk5a62jmzm3m/Александр%20Акимов.jpg" alt="Александр Акимов">
                    </div>
                    <div class="leader-info">
                        <h2>Александр Акимов</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Тульская область</div>
                    </div>
                </div>
                
                <div class="leader-card">
                    <div class="leader-photo">
                        <img src="https://www.mfr.ru/upload/medialibrary/634/sbtc12d30f4y68i0ndmc2pxz415mx9dd/Александр%20Ципилев.jpg" alt="Александр Ципилев">
                    </div>
                    <div class="leader-info">
                        <h2>Александр Ципилев</h2>
                        <div class="position">Член Комиссии</div>
                        <div class="region">Москва, МОО "Федерация Мотоджимханы"</div>
                    </div>
                </div>
            </div>
            
            <h2 class="section-title">Региональные представители</h2>
            
            <div class="regions-table">
                <table>
                    <thead>
                        <tr>
                            <th>Регион</th>
                            <th>Представитель</th>
                            <th>Телефон</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody id="regions-tbody">
                        <tr>
                            <td>Тверская область</td>
                            <td>Дмитрий Серов</td>
                            <td>+7 (977) 823-63-90</td>
                            <td>serovdima@list.ru</td>
                        </tr>
                        <tr>
                            <td>Нижний Новгород</td>
                            <td>Алексей Фатьянов</td>
                            <td>+7 (905) 234-56-78</td>
                            <td>fatyanov@mfr-nnov.ru</td>
                        </tr>
                        <tr>
                            <td>Вологодская область</td>
                            <td>Наталия Недайводина</td>
                            <td>+7 (911) 456-78-90</td>
                            <td>vologda-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Смоленская область</td>
                            <td>Глеб Симдянкин</td>
                            <td>+7 (910) 345-67-89</td>
                            <td>smolensk-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Ульяновская область</td>
                            <td>Андрей Сальников</td>
                            <td>+7 (923) 567-89-01</td>
                            <td>ul-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Республика Татарстан</td>
                            <td>Ильшат Сафаров</td>
                            <td>+7 (934) 678-90-12</td>
                            <td>tatarstan-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Калужская область</td>
                            <td>Максим Гаранин</td>
                            <td>+7 (945) 789-01-23</td>
                            <td>kaluga-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Тульская область</td>
                            <td>Александр Акимов</td>
                            <td>+7 (956) 890-12-34</td>
                            <td>tula-fum@mfr.ru</td>
                        </tr>
                        <tr>
                            <td>Москва</td>
                            <td>Александр Ципилев</td>
                            <td>+7 (903) 123-45-67</td>
                            <td>moscow-fum@mfr.ru</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="admin-panel">
                <button id="edit-regions-btn" class="admin-btn">Редактировать список регионов</button>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-logos">
                <a href="https://www.mfr.ru/" target="_blank">
                    <img src="images/mfr-logo.png" alt="Логотип МФР">
                </a>
                <a href="https://www.minsport.gov.ru/" target="_blank">
                    <img src="images/minsport-logo.png" alt="Логотип Министерства спорта РФ">
                </a>
            </div>
            <div class="footer-links">
                <a href="https://disk.yandex.ru/d/ubxzU_0RzkFsJw" target="_blank">Документы комиссии</a>
                <a href="https://www.mfr.ru/" target="_blank">Официальный сайт МФР</a>
                <a href="https://www.mfr.ru/disciplines/motodzhimkhana/" target="_blank">Страница мотоджимханы на сайте МФР</a>
            </div>
            <div class="copyright">
                © 2025 Федерация мотоциклетного спорта России
            </div>
        </footer>
    </div>
    
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Редактирование списка регионов</h2>
            <div id="regions-editor"></div>
            <button id="save-regions-btn" class="admin-btn">Сохранить изменения</button>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Редактирование региональных представителей
            document.getElementById('edit-regions-btn').addEventListener('click', function() {
                const tbody = document.getElementById('regions-tbody');
                const rows = tbody.querySelectorAll('tr');
                
                let editorHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>Регион</th>
                                <th>Представитель</th>
                                <th>Телефон</th>
                                <th>Email</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="editor-tbody">
                `;
                
                rows.forEach((row, index) => {
                    const cells = row.querySelectorAll('td');
                    editorHTML += `
                        <tr data-index="${index}">
                            <td><input type="text" class="region-input" value="${cells[0].textContent}"></td>
                            <td><input type="text" class="representative-input" value="${cells[1].textContent}"></td>
                            <td><input type="text" class="phone-input" value="${cells[2].textContent}"></td>
                            <td><input type="text" class="email-input" value="${cells[3].textContent}"></td>
                            <td>
                                <button class="delete-row-btn" data-index="${index}">Удалить</button>
                            </td>
                        </tr>
                    `;
                });
                
                editorHTML += `
                        </tbody>
                    </table>
                    <button id="add-row-btn" class="admin-btn">Добавить регион</button>
                `;
                
                document.getElementById('regions-editor').innerHTML = editorHTML;
                document.getElementById('admin-modal').style.display = 'block';
                
                // Добавление новой строки
                document.getElementById('add-row-btn').addEventListener('click', function() {
                    const tbody = document.getElementById('editor-tbody');
                    const newIndex = tbody.children.length;
                    
                    const newRow = document.createElement('tr');
                    newRow.setAttribute('data-index', newIndex);
                    newRow.innerHTML = `
                        <td><input type="text" class="region-input" value=""></td>
                        <td><input type="text" class="representative-input" value=""></td>
                        <td><input type="text" class="phone-input" value=""></td>
                        <td><input type="text" class="email-input" value=""></td>
                        <td>
                            <button class="delete-row-btn" data-index="${newIndex}">Удалить</button>
                        </td>
                    `;
                    tbody.appendChild(newRow);
                });
                
                // Удаление строки
                document.querySelectorAll('.delete-row-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = this.getAttribute('data-index');
                        const row = document.querySelector(`tr[data-index="${index}"]`);
                        if (row) row.remove();
                    });
                });
            });
            
            // Закрытие модального окна
            document.querySelector('.close').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'none';
            });
            
            // Сохранение изменений
            document.getElementById('save-regions-btn').addEventListener('click', function() {
                const editorTbody = document.getElementById('editor-tbody');
                const rows = editorTbody.querySelectorAll('tr');
                
                const newRows = [];
                rows.forEach(row => {
                    const cells = row.querySelectorAll('input');
                    if (cells.length >= 4) {
                        const region = cells[0].value.trim();
                        const representative = cells[1].value.trim();
                        const phone = cells[2].value.trim();
                        const email = cells[3].value.trim();
                        
                        if (region && representative) {
                            newRows.push({
                                region,
                                representative,
                                phone,
                                email
                            });
                        }
                    }
                });
                
                // Сохранение в localStorage
                localStorage.setItem('regionsList', JSON.stringify(newRows));
                
                // Обновление таблицы на странице
                const tbody = document.getElementById('regions-tbody');
                tbody.innerHTML = '';
                
                newRows.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${row.region}</td>
                        <td>${row.representative}</td>
                        <td>${row.phone}</td>
                        <td>${row.email}</td>
                    `;
                    tbody.appendChild(tr);
                });
                
                document.getElementById('admin-modal').style.display = 'none';
            });
            
            // Загрузка данных из localStorage при загрузке страницы
            const savedRegions = localStorage.getItem('regionsList');
            if (savedRegions) {
                try {
                    const regions = JSON.parse(savedRegions);
                    const tbody = document.getElementById('regions-tbody');
                    tbody.innerHTML = '';
                    
                    regions.forEach(region => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td>${region.region}</td>
                            <td>${region.representative}</td>
                            <td>${region.phone}</td>
                            <td>${region.email}</td>
                        `;
                        tbody.appendChild(tr);
                    });
                } catch (e) {
                    console.error('Ошибка при загрузке данных из localStorage:', e);
                }
            }
        });
    </script>
</body>
</html>
